# Pipeline GitHub Actions: testes unitários e de integração
on:
  push:
    branches: 
      - main       # Executar em pushes para o branch 'main'
      - develop    # e também para 'develop'
  pull_request:
    branches:
      - main       # Executar em PRs que targetam 'main'
      - develop    # e PRs que targetam 'develop'

jobs:
  unit-tests:
    name: "Testes Unitários"
    runs-on: ubuntu-latest    # Runner Ubuntu para executar o job
    steps:
      - name: Checkout do código       # Faz o checkout do repositório
        uses: actions/checkout@v4
      - name: Setup Node.js            # Configura a versão do Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
      - name: Instalar dependências    # Instala as dependências do projeto
        run: npm ci
      - name: Executar testes unitários  # Executa os testes unitários configurados
        run: npm test

  integration-tests:
    name: "Testes de Integração"
    runs-on: ubuntu-latest    # Runner Ubuntu para executar o job
    steps:
      - name: Checkout do código         # Faz o checkout do repositório
        uses: actions/checkout@v4
      - name: Setup Node.js              # Configura a versão do Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
      - name: Instalar dependências      # Instala as dependências do projeto
        run: npm ci
      - name: Executar testes de integração  # Executa os testes de integração (e.g. Cypress)
        run: npm run test:integration      # Ajuste conforme o comando real de integração
